"use strict";(self.webpackChunkkonva_site_2=self.webpackChunkkonva_site_2||[]).push([[5893],{80903:(n,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>g,frontMatter:()=>d,metadata:()=>e,toc:()=>c});const e=JSON.parse('{"id":"docs/sandbox/Image_Resize","title":"HTML5 Canvas \u62d6\u52a8\u3001\u653e\u7f6e\u548c\u8c03\u6574\u56fe\u50cf\u5927\u5c0f\u6f14\u793a","description":"\u672c\u6f14\u793a\u5c55\u793a\u4e86\u5982\u4f55\u624b\u52a8\u5b9e\u73b0\u5e26\u6709\u89d2\u90e8\u951a\u70b9\u7684\u56fe\u50cf\u8c03\u6574\u5927\u5c0f\u529f\u80fd\u3002\u56fe\u50cf\u65e2\u53ef\u4ee5\u62d6\u52a8\u4e5f\u53ef\u4ee5\u8c03\u6574\u5927\u5c0f\u3002","source":"@site/content/docs/sandbox/Image_Resize.mdx","sourceDirName":"docs/sandbox","slug":"/docs/sandbox/Image_Resize.html","permalink":"/docs/sandbox/Image_Resize.html","draft":false,"unlisted":false,"editUrl":"https://github.com/zhcndoc/konva/tree/main/content/docs/sandbox/Image_Resize.mdx","tags":[],"version":"current","frontMatter":{"title":"HTML5 Canvas \u62d6\u52a8\u3001\u653e\u7f6e\u548c\u8c03\u6574\u56fe\u50cf\u5927\u5c0f\u6f14\u793a","sidebar_label":"\u56fe\u50cf\u8c03\u6574\u5927\u5c0f","hide_table_of_contents":true,"slug":"Image_Resize.html"},"sidebar":"tutorialsSidebar","previous":{"title":"\u56fe\u50cf\u6807\u6ce8","permalink":"/docs/sandbox/Image_Labeling.html"},"next":{"title":"\u4ea4\u4e92\u5f0f\u5efa\u7b51\u5730\u56fe","permalink":"/docs/sandbox/Interactive_Building_Map.html"}}');var a=o(74848),r=o(28453);const d={title:"HTML5 Canvas \u62d6\u52a8\u3001\u653e\u7f6e\u548c\u8c03\u6574\u56fe\u50cf\u5927\u5c0f\u6f14\u793a",sidebar_label:"\u56fe\u50cf\u8c03\u6574\u5927\u5c0f",hide_table_of_contents:!0,slug:"Image_Resize.html"},i=void 0,s={},c=[];function h(n){const t={a:"a",code:"code",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"\u672c\u6f14\u793a\u5c55\u793a\u4e86\u5982\u4f55\u624b\u52a8\u5b9e\u73b0\u5e26\u6709\u89d2\u90e8\u951a\u70b9\u7684\u56fe\u50cf\u8c03\u6574\u5927\u5c0f\u529f\u80fd\u3002\u56fe\u50cf\u65e2\u53ef\u4ee5\u62d6\u52a8\u4e5f\u53ef\u4ee5\u8c03\u6574\u5927\u5c0f\u3002"}),"\n",(0,a.jsxs)(t.p,{children:["\u6ce8\u610f\uff1a\u6211\u4eec\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5185\u7f6e\u7684\u65b9\u6cd5\u7528\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u5373\u7279\u6b8a\u7684 ",(0,a.jsx)(t.code,{children:"Konva.Transformer"})," \u8282\u70b9\u3002\u8bf7\u67e5\u770b ",(0,a.jsx)(t.a,{href:"/docs/select_and_transform/Basic_demo.html",children:"\u9009\u62e9\u548c\u53d8\u6362\u6f14\u793a"})," \u4ee5\u83b7\u53d6\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\u3002"]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"\u8bf4\u660e\uff1a"})," \u62d6\u52a8\u56fe\u50cf\u4ee5\u79fb\u52a8\u5b83\u4eec\u3002\u70b9\u51fb\u5e76\u62d6\u52a8\u89d2\u90e8\u951a\u70b9\u4ee5\u8c03\u6574\u5927\u5c0f\u3002"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",metastring:"live vanilla",live:!0,children:"import Konva from 'konva';\n\nconst width = window.innerWidth;\nconst height = window.innerHeight;\n\nconst stage = new Konva.Stage({\n  container: 'container',\n  width: width,\n  height: height,\n});\n\nconst layer = new Konva.Layer();\nstage.add(layer);\n\n// \u6839\u636e\u951a\u70b9\u79fb\u52a8\u66f4\u65b0\u56fe\u50cf\u5927\u5c0f\u7684\u51fd\u6570\nfunction update(activeAnchor) {\n  const group = activeAnchor.getParent();\n\n  const topLeft = group.findOne('.topLeft');\n  const topRight = group.findOne('.topRight');\n  const bottomRight = group.findOne('.bottomRight');\n  const bottomLeft = group.findOne('.bottomLeft');\n  const image = group.findOne('Image');\n\n  const anchorX = activeAnchor.x();\n  const anchorY = activeAnchor.y();\n\n  // \u6839\u636e\u54ea\u4e2a\u951a\u70b9\u88ab\u79fb\u52a8\u6765\u66f4\u65b0\u951a\u70b9\u4f4d\u7f6e\n  switch (activeAnchor.getName()) {\n    case 'topLeft':\n      topRight.y(anchorY);\n      bottomLeft.x(anchorX);\n      break;\n    case 'topRight':\n      topLeft.y(anchorY);\n      bottomRight.x(anchorX);\n      break;\n    case 'bottomRight':\n      bottomLeft.y(anchorY);\n      topRight.x(anchorX);\n      break;\n    case 'bottomLeft':\n      bottomRight.y(anchorY);\n      topLeft.x(anchorX);\n      break;\n  }\n\n  // \u5c06\u56fe\u50cf\u4f4d\u7f6e\u653e\u7f6e\u5728\u5de6\u4e0a\u89d2\n  image.position(topLeft.position());\n\n  // \u66f4\u65b0\u56fe\u50cf\u5c3a\u5bf8\n  const width = topRight.x() - topLeft.x();\n  const height = bottomLeft.y() - topLeft.y();\n  if (width && height) {\n    image.width(width);\n    image.height(height);\n  }\n}\n\n// \u4e3a\u4e00\u4e2a\u7ec4\u6dfb\u52a0\u8c03\u6574\u5927\u5c0f\u951a\u70b9\u7684\u51fd\u6570\nfunction addAnchor(group, x, y, name) {\n  const anchor = new Konva.Circle({\n    x: x,\n    y: y,\n    stroke: '#666',\n    fill: '#ddd',\n    strokeWidth: 2,\n    radius: 8,\n    name: name,\n    draggable: true,\n    dragOnTop: false,\n  });\n\n  // \u6dfb\u52a0\u4e8b\u4ef6\u76d1\u542c\u5668\u4ee5\u5b9e\u73b0\u8c03\u6574\u5927\u5c0f\u7684\u884c\u4e3a\n  anchor.on('dragmove', function () {\n    update(this);\n  });\n  \n  anchor.on('mousedown touchstart', function () {\n    group.draggable(false);\n    this.moveToTop();\n  });\n  \n  anchor.on('dragend', function () {\n    group.draggable(true);\n  });\n  \n  // \u6dfb\u52a0\u60ac\u505c\u6837\u5f0f\n  anchor.on('mouseover', function () {\n    document.body.style.cursor = 'pointer';\n    this.strokeWidth(4);\n  });\n  \n  anchor.on('mouseout', function () {\n    document.body.style.cursor = 'default';\n    this.strokeWidth(2);\n  });\n\n  group.add(anchor);\n}\n\n// \u521b\u5efa\u8fbe\u65af\xb7\u7ef4\u5fb7\u7ec4\u53ca\u5176\u56fe\u50cf\u548c\u951a\u70b9\nconst darthVaderImg = new Konva.Image({\n  width: 200,\n  height: 137,\n});\n\nconst darthVaderGroup = new Konva.Group({\n  x: 180,\n  y: 50,\n  draggable: true,\n});\n\nlayer.add(darthVaderGroup);\ndarthVaderGroup.add(darthVaderImg);\n\n// \u5728\u89d2\u843d\u6dfb\u52a0\u951a\u70b9\naddAnchor(darthVaderGroup, 0, 0, 'topLeft');\naddAnchor(darthVaderGroup, 200, 0, 'topRight');\naddAnchor(darthVaderGroup, 200, 137, 'bottomRight');\naddAnchor(darthVaderGroup, 0, 137, 'bottomLeft');\n\n// \u521b\u5efa\u5c24\u8fbe\u7ec4\u53ca\u5176\u56fe\u50cf\u548c\u951a\u70b9\nconst yodaImg = new Konva.Image({\n  width: 93,\n  height: 104,\n});\n\nconst yodaGroup = new Konva.Group({\n  x: 20,\n  y: 110,\n  draggable: true,\n});\n\nlayer.add(yodaGroup);\nyodaGroup.add(yodaImg);\n\n// \u5728\u89d2\u843d\u6dfb\u52a0\u951a\u70b9\naddAnchor(yodaGroup, 0, 0, 'topLeft');\naddAnchor(yodaGroup, 93, 0, 'topRight');\naddAnchor(yodaGroup, 93, 104, 'bottomRight');\naddAnchor(yodaGroup, 0, 104, 'bottomLeft');\n\n// \u52a0\u8f7d\u56fe\u50cf\nconst imageObj1 = new Image();\nimageObj1.onload = function () {\n  darthVaderImg.image(imageObj1);\n};\nimageObj1.src = 'https://konvajs.org/assets/darth-vader.jpg';\n\nconst imageObj2 = new Image();\nimageObj2.onload = function () {\n  yodaImg.image(imageObj2);\n};\nimageObj2.src = 'https://konvajs.org/assets/yoda.jpg';\n"})})]})}function g(n={}){const{wrapper:t}={...(0,r.R)(),...n.components};return t?(0,a.jsx)(t,{...n,children:(0,a.jsx)(h,{...n})}):h(n)}},28453:(n,t,o)=>{o.d(t,{R:()=>d,x:()=>i});var e=o(96540);const a={},r=e.createContext(a);function d(n){const t=e.useContext(r);return e.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function i(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:d(n.components),e.createElement(r.Provider,{value:t},n.children)}}}]);