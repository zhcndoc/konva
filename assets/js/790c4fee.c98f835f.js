"use strict";(self.webpackChunkkonva_site_2=self.webpackChunkkonva_site_2||[]).push([[6296],{3784:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>l,frontMatter:()=>s,metadata:()=>r,toc:()=>g});const r=JSON.parse('{"id":"docs/react/Drop_Image","title":"\u5982\u4f55\u5728\u753b\u5e03\u4e0a\u62d6\u653e\u56fe\u50cf\u5143\u7d20\u4e0e React\uff1f","description":"\u60a8\u53ef\u4ee5\u4f7f\u7528\u539f\u751f HTML5 \u62d6\u653e\u529f\u80fd\u5c06\u56fe\u50cf\uff08\u6216\u5176\u4ed6\u5143\u7d20\uff09\u4ece\u9875\u9762\u62d6\u653e\u5230\u753b\u5e03\u533a\u57df\u3002","source":"@site/content/docs/react/Drop_Image.mdx","sourceDirName":"docs/react","slug":"/docs/react/Drop_Image.html","permalink":"/docs/react/Drop_Image.html","draft":false,"unlisted":false,"editUrl":"https://github.com/zhcndoc/konva/tree/main/content/docs/react/Drop_Image.mdx","tags":[],"version":"current","frontMatter":{"title":"\u5982\u4f55\u5728\u753b\u5e03\u4e0a\u62d6\u653e\u56fe\u50cf\u5143\u7d20\u4e0e React\uff1f","sidebar_label":"\u62d6\u653e\u56fe\u50cf","hide_table_of_contents":true,"slug":"Drop_Image.html"},"sidebar":"tutorialsSidebar","previous":{"title":"\u62d6\u653e","permalink":"/docs/react/Drag_And_Drop.html"},"next":{"title":"\u4e8b\u4ef6","permalink":"/docs/react/Events.html"}}');var a=t(74848),o=t(28453);const s={title:"\u5982\u4f55\u5728\u753b\u5e03\u4e0a\u62d6\u653e\u56fe\u50cf\u5143\u7d20\u4e0e React\uff1f",sidebar_label:"\u62d6\u653e\u56fe\u50cf",hide_table_of_contents:!0,slug:"Drop_Image.html"},i=void 0,c={},g=[];function m(e){const n={code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"\u60a8\u53ef\u4ee5\u4f7f\u7528\u539f\u751f HTML5 \u62d6\u653e\u529f\u80fd\u5c06\u56fe\u50cf\uff08\u6216\u5176\u4ed6\u5143\u7d20\uff09\u4ece\u9875\u9762\u62d6\u653e\u5230\u753b\u5e03\u533a\u57df\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",metastring:"live react",live:!0,children:"import React from 'react';\nimport { Stage, Layer, Image } from 'react-konva';\nimport useImage from 'use-image';\n\nconst URLImage = ({ image }) => {\n  const [img] = useImage(image.src);\n  return (\n    <Image\n      image={img}\n      x={image.x}\n      y={image.y}\n      // \u6211\u5c06\u4f7f\u7528\u504f\u79fb\u91cf\u5c06\u539f\u70b9\u8bbe\u7f6e\u4e3a\u56fe\u50cf\u7684\u4e2d\u5fc3\n      offsetX={img ? img.width / 2 : 0}\n      offsetY={img ? img.height / 2 : 0}\n      draggable\n    />\n  );\n};\n\nconst App = () => {\n  const dragUrl = React.useRef();\n  const stageRef = React.useRef();\n  const [images, setImages] = React.useState([]);\n  return (\n    <div>\n      \u5c1d\u8bd5\u5c06\u56fe\u50cf\u62d6\u653e\u5230\u821e\u53f0\u4e0a\uff1a\n      <br />\n      <img\n        alt=\"lion\"\n        src=\"https://konvajs.org/assets/lion.png\"\n        draggable=\"true\"\n        onDragStart={(e) => {\n          dragUrl.current = e.target.src;\n        }}\n      />\n      <div\n        onDrop={(e) => {\n          e.preventDefault();\n          // \u6ce8\u518c\u4e8b\u4ef6\u4f4d\u7f6e\n          stageRef.current.setPointersPositions(e);\n          // \u6dfb\u52a0\u56fe\u50cf\n          setImages(\n            images.concat([\n              {\n                ...stageRef.current.getPointerPosition(),\n                src: dragUrl.current,\n              },\n            ])\n          );\n        }}\n        onDragOver={(e) => e.preventDefault()}\n      >\n        <Stage\n          width={window.innerWidth}\n          height={window.innerHeight}\n          style={{ border: '1px solid grey' }}\n          ref={stageRef}\n        >\n          <Layer>\n            {images.map((image) => {\n              return <URLImage image={image} />;\n            })}\n          </Layer>\n        </Stage>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"})})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var r=t(96540);const a={},o=r.createContext(a);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);