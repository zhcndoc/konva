"use strict";(self.webpackChunkkonva_site_2=self.webpackChunkkonva_site_2||[]).push([[6483],{47506:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"docs/react/Canvas_Export","title":"\u5982\u4f55\u4ece react-konva \u5bfc\u51fa\u753b\u5e03\u4e3a\u56fe\u50cf?","description":"\u5982\u4f55\u4fdd\u5b58\u6765\u81ea react-konva \u7684\u7ed8\u56fe?","source":"@site/content/docs/react/Canvas_Export.mdx","sourceDirName":"docs/react","slug":"/docs/react/Canvas_Export.html","permalink":"/docs/react/Canvas_Export.html","draft":false,"unlisted":false,"editUrl":"https://github.com/zhcndoc/konva/tree/main/content/docs/react/Canvas_Export.mdx","tags":[],"version":"current","frontMatter":{"title":"\u5982\u4f55\u4ece react-konva \u5bfc\u51fa\u753b\u5e03\u4e3a\u56fe\u50cf?","sidebar_label":"\u753b\u5e03\u5bfc\u51fa","hide_table_of_contents":true,"slug":"Canvas_Export.html"},"sidebar":"tutorialsSidebar","previous":{"title":"\u8bbf\u95ee Konva \u8282\u70b9","permalink":"/docs/react/Access_Konva_Nodes.html"},"next":{"title":"\u753b\u5e03\u95e8\u6237","permalink":"/docs/react/Canvas_Portal.html"}}');var o=t(74848),r=t(28453);const c={title:"\u5982\u4f55\u4ece react-konva \u5bfc\u51fa\u753b\u5e03\u4e3a\u56fe\u50cf?",sidebar_label:"\u753b\u5e03\u5bfc\u51fa",hide_table_of_contents:!0,slug:"Canvas_Export.html"},i=void 0,s={},d=[{value:"\u5982\u4f55\u4fdd\u5b58\u6765\u81ea react-konva \u7684\u7ed8\u56fe?",id:"\u5982\u4f55\u4fdd\u5b58\u6765\u81ea-react-konva-\u7684\u7ed8\u56fe",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"\u5982\u4f55\u4fdd\u5b58\u6765\u81ea-react-konva-\u7684\u7ed8\u56fe",children:"\u5982\u4f55\u4fdd\u5b58\u6765\u81ea react-konva \u7684\u7ed8\u56fe?"}),"\n",(0,o.jsxs)(n.p,{children:["\u8981\u5c06\u4efb\u4f55 ",(0,o.jsx)(n.code,{children:"Konva"})," \u8282\u70b9\u5bfc\u51fa\u4e3a\u56fe\u50cf\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,o.jsx)(n.a,{href:"/api/Konva.Node.html#toDataURL",children:"node.toDataURL()"})," \u6216 ",(0,o.jsx)(n.a,{href:"https://konvajs.org/api/Konva.Node.html#toImage",children:"node.toImage()"})," API\u3002\u8bf7\u67e5\u770b ",(0,o.jsx)(n.a,{href:"https://konvajs.org/docs/data_and_serialization/Stage_Data_URL.html",children:"\u539f\u751f Konva \u56fe\u50cf\u5bfc\u51fa\u6f14\u793a"}),"\u3002"]}),"\n",(0,o.jsxs)(n.p,{children:["\u60a8\u9700\u8981\u4f7f\u7528 ",(0,o.jsx)(n.a,{href:"/docs/react/Access_Konva_Nodes.html",children:"Refs API"})," \u76f4\u63a5\u8bbf\u95ee ",(0,o.jsx)(n.code,{children:"Konva"})," \u8282\u70b9\uff0c\u4ee5\u4fbf\u8c03\u7528\u8fd9\u4e9b\u65b9\u6cd5\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:"live react",live:!0,children:"import React, { Fragment } from 'react';\nimport { Stage, Layer, Rect } from 'react-konva';\n\n// \u6765\u81ea https://stackoverflow.com/a/15832662/512042 \u7684\u51fd\u6570\nfunction downloadURI(uri, name) {\n  var link = document.createElement('a');\n  link.download = name;\n  link.href = uri;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\nconst App = () => {\n  const width = window.innerWidth;\n  const height = window.innerHeight;\n\n  const stageRef = React.useRef(null);\n\n  const handleExport = () => {\n    const uri = stageRef.current.toDataURL();\n    console.log(uri);\n    // \u6211\u4eec\u8fd8\u53ef\u4ee5\u5c06 uri \u4fdd\u5b58\u4e3a\u6587\u4ef6\n    downloadURI(uri, 'stage.png');\n  };\n\n  return (\n    <Fragment>\n      <button onClick={handleExport}>\u70b9\u51fb\u6b64\u5904\u5c06\u821e\u53f0\u5bfc\u51fa\u4e3a\u56fe\u50cf</button>\n      <Stage width={width} height={height} ref={stageRef}>\n        <Layer>\n          <Rect x={0} y={0} width={80} height={80} fill=\"red\" />\n          <Rect x={width - 80} y={0} width={80} height={80} fill=\"red\" />\n          <Rect\n            x={width - 80}\n            y={height - 80}\n            width={80}\n            height={80}\n            fill=\"red\"\n          />\n          <Rect x={0} y={height - 80} width={80} height={80} fill=\"red\" />\n        </Layer>\n      </Stage>\n    </Fragment>\n  );\n};\n\nexport default App;\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>i});var a=t(96540);const o={},r=a.createContext(o);function c(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);