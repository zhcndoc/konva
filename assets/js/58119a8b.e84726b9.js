"use strict";(self.webpackChunkkonva_site_2=self.webpackChunkkonva_site_2||[]).push([[3758],{16986:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"docs/react/Events","title":"\u5982\u4f55\u4f7f\u7528 React \u548c Konva \u5728\u753b\u5e03\u5f62\u72b6\u4e0a\u76d1\u542c\u4e8b\u4ef6\uff1f","description":"\u901a\u8fc7 react-konva\uff0c\u60a8\u53ef\u4ee5\u5c06 Konva \u652f\u6301\u7684\u4efb\u4f55\u4e8b\u4ef6\u9644\u52a0\u5230\u753b\u5e03\u8282\u70b9\u4e0a\u3002","source":"@site/content/docs/react/Events.mdx","sourceDirName":"docs/react","slug":"/docs/react/Events.html","permalink":"/docs/react/Events.html","draft":false,"unlisted":false,"editUrl":"https://github.com/zhcndoc/konva/tree/main/content/docs/react/Events.mdx","tags":[],"version":"current","frontMatter":{"title":"\u5982\u4f55\u4f7f\u7528 React \u548c Konva \u5728\u753b\u5e03\u5f62\u72b6\u4e0a\u76d1\u542c\u4e8b\u4ef6\uff1f","sidebar_label":"\u4e8b\u4ef6","hide_table_of_contents":true,"slug":"Events.html"},"sidebar":"tutorialsSidebar","previous":{"title":"\u62d6\u653e\u56fe\u50cf","permalink":"/docs/react/Drop_Image.html"},"next":{"title":"\u6ee4\u955c","permalink":"/docs/react/Filters.html"}}');var r=t(74848),s=t(28453);const o={title:"\u5982\u4f55\u4f7f\u7528 React \u548c Konva \u5728\u753b\u5e03\u5f62\u72b6\u4e0a\u76d1\u542c\u4e8b\u4ef6\uff1f",sidebar_label:"\u4e8b\u4ef6",hide_table_of_contents:!0,slug:"Events.html"},i=void 0,c={},d=[];function l(n){const e={a:"a",code:"code",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.p,{children:["\u901a\u8fc7 ",(0,r.jsx)(e.code,{children:"react-konva"}),"\uff0c\u60a8\u53ef\u4ee5\u5c06 ",(0,r.jsx)(e.code,{children:"Konva"})," \u652f\u6301\u7684\u4efb\u4f55\u4e8b\u4ef6\u9644\u52a0\u5230\u753b\u5e03\u8282\u70b9\u4e0a\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u4e3a\u6b64\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"onEventName"})," \u65b9\u6848\uff0c\u4f8b\u5982 ",(0,r.jsx)(e.code,{children:"onMouseDown"})," \u7528\u4e8e ",(0,r.jsx)(e.code,{children:"mousedown"}),"\uff0c",(0,r.jsx)(e.code,{children:"onDragEnd"})," \u7528\u4e8e ",(0,r.jsx)(e.code,{children:"dragend"})," \u7b49\u7b49\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u6709\u5173\u4e8b\u4ef6\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u67e5\u770b ",(0,r.jsx)(e.a,{href:"/api/Konva.Node.html#on",children:"on() \u65b9\u6cd5\u6587\u6863"}),"\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728\u8fd9\u4e2a\u6f14\u793a\u4e2d\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u5982\u4f55\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"dragstart"})," \u548c ",(0,r.jsx)(e.code,{children:"dragend"})," \u4e8b\u4ef6\u6765\u521b\u5efa\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u7684\u661f\u7a7a\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",metastring:"live react",live:!0,children:'import React from \'react\';\nimport { Stage, Layer, Star, Text } from \'react-konva\';\n\nfunction generateShapes() {\n  return [...Array(10)].map((_, i) => ({\n    id: i.toString(),\n    x: Math.random() * window.innerWidth,\n    y: Math.random() * window.innerHeight,\n    rotation: Math.random() * 180,\n    isDragging: false,\n  }));\n}\n\nconst App = () => {\n  const [stars, setStars] = React.useState(generateShapes());\n\n  const handleDragStart = (e) => {\n    const id = e.target.id();\n    setStars(\n      stars.map((star) => {\n        return {\n          ...star,\n          isDragging: star.id === id,\n        };\n      })\n    );\n  };\n\n  const handleDragEnd = (e) => {\n    setStars(\n      stars.map((star) => {\n        return {\n          ...star,\n          isDragging: false,\n        };\n      })\n    );\n  };\n\n  return (\n    <Stage width={window.innerWidth} height={window.innerHeight}>\n      <Layer>\n        <Text text="\u8bd5\u7740\u62d6\u52a8\u4e00\u4e2a\u661f\u661f" />\n        {stars.map((star) => (\n          <Star\n            key={star.id}\n            id={star.id}\n            x={star.x}\n            y={star.y}\n            numPoints={5}\n            innerRadius={20}\n            outerRadius={40}\n            fill="#89b717"\n            opacity={0.8}\n            draggable\n            rotation={star.rotation}\n            shadowColor="black"\n            shadowBlur={10}\n            shadowOpacity={0.6}\n            shadowOffsetX={star.isDragging ? 10 : 5}\n            shadowOffsetY={star.isDragging ? 10 : 5}\n            scaleX={star.isDragging ? 1.2 : 1}\n            scaleY={star.isDragging ? 1.2 : 1}\n            onDragStart={handleDragStart}\n            onDragEnd={handleDragEnd}\n          />\n        ))}\n      </Layer>\n    </Stage>\n  );\n};\n\nexport default App;\n'})})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>i});var a=t(96540);const r={},s=a.createContext(r);function o(n){const e=a.useContext(s);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),a.createElement(s.Provider,{value:e},n.children)}}}]);