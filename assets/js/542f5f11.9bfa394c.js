"use strict";(self.webpackChunkkonva_site_2=self.webpackChunkkonva_site_2||[]).push([[5667],{47553:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>u,contentTitle:()=>d,default:()=>f,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"docs/styling/Fill","title":"HTML5 Canvas \u586b\u5145\u6559\u7a0b","description":"\u4e3a\u4e86\u7528 Konva \u586b\u5145\u5f62\u72b6\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5b9e\u4f8b\u5316\u5f62\u72b6\u65f6\u8bbe\u7f6e fill \u5c5e\u6027\uff0c\u6216\u8005\u4f7f\u7528 fill() \u65b9\u6cd5\u3002","source":"@site/content/docs/styling/01-Fill.mdx","sourceDirName":"docs/styling","slug":"/docs/styling/Fill.html","permalink":"/docs/styling/Fill.html","draft":false,"unlisted":false,"editUrl":"https://github.com/zhcndoc/konva/tree/main/content/docs/styling/01-Fill.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"HTML5 Canvas \u586b\u5145\u6559\u7a0b","sidebar_label":"\u586b\u5145","hide_table_of_contents":true,"slug":"Fill.html"},"sidebar":"tutorialsSidebar","previous":{"title":"\u6954\u5f62","permalink":"/docs/shapes/Wedge.html"},"next":{"title":"\u8fb9\u6846","permalink":"/docs/styling/Stroke.html"}}');var r=t(74848),o=t(28453),l=t(11470),i=t(19365);const s={title:"HTML5 Canvas \u586b\u5145\u6559\u7a0b",sidebar_label:"\u586b\u5145",hide_table_of_contents:!0,slug:"Fill.html"},d=void 0,u={},c=[];function g(n){const e={code:"code",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.p,{children:["\u4e3a\u4e86\u7528 Konva \u586b\u5145\u5f62\u72b6\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5b9e\u4f8b\u5316\u5f62\u72b6\u65f6\u8bbe\u7f6e fill \u5c5e\u6027\uff0c\u6216\u8005\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"fill()"})," \u65b9\u6cd5\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"Konva \u652f\u6301\u989c\u8272\u3001\u56fe\u6848\u3001\u7ebf\u6027\u6e10\u53d8\u548c\u5f84\u5411\u6e10\u53d8\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u5c06\u9f20\u6807\u60ac\u505c\u5728\u6bcf\u4e2a\u4e94\u8fb9\u5f62\u4e0a\u4ee5\u66f4\u6539\u5176\u586b\u5145\u3002\u60a8\u8fd8\u53ef\u4ee5\u62d6\u653e\u8fd9\u4e9b\u5f62\u72b6\u3002"}),"\n","\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(i.A,{value:"Vanilla",default:!0,children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",metastring:"live vanilla",live:!0,children:"import Konva from 'konva';\n\nfunction loadImages(sources, callback) {\n  var images = {};\n  var loadedImages = 0;\n  var numImages = 0;\n  // \u83b7\u53d6\u8d44\u6e90\u6570\u91cf\n  for (var src in sources) {\n    numImages++;\n  }\n  for (var src in sources) {\n    images[src] = new Image();\n    images[src].onload = function () {\n      if (++loadedImages >= numImages) {\n        callback(images);\n      }\n    };\n    images[src].src = sources[src];\n  }\n}\nfunction draw(images) {\n  var width = window.innerWidth;\n  var height = window.innerHeight;\n\n  var stage = new Konva.Stage({\n    container: 'container',\n    width: width,\n    height: height,\n  });\n  var layer = new Konva.Layer();\n\n  var colorPentagon = new Konva.RegularPolygon({\n    x: 80,\n    y: stage.height() / 2,\n    sides: 5,\n    radius: 70,\n    fill: 'red',\n    stroke: 'black',\n    strokeWidth: 4,\n    draggable: true,\n  });\n\n  var patternPentagon = new Konva.RegularPolygon({\n    x: 220,\n    y: stage.height() / 2,\n    sides: 5,\n    radius: 70,\n    fillPatternImage: images.darthVader,\n    fillPatternOffset: { x: -220, y: 70 },\n    stroke: 'black',\n    strokeWidth: 4,\n    draggable: true,\n  });\n\n  var linearGradPentagon = new Konva.RegularPolygon({\n    x: 360,\n    y: stage.height() / 2,\n    sides: 5,\n    radius: 70,\n    fillLinearGradientStartPoint: { x: -50, y: -50 },\n    fillLinearGradientEndPoint: { x: 50, y: 50 },\n    fillLinearGradientColorStops: [0, 'red', 1, 'yellow'],\n    stroke: 'black',\n    strokeWidth: 4,\n    draggable: true,\n  });\n\n  var radialGradPentagon = new Konva.RegularPolygon({\n    x: 500,\n    y: stage.height() / 2,\n    sides: 5,\n    radius: 70,\n    fillRadialGradientStartPoint: { x: 0, y: 0 },\n    fillRadialGradientStartRadius: 0,\n    fillRadialGradientEndPoint: { x: 0, y: 0 },\n    fillRadialGradientEndRadius: 70,\n    fillRadialGradientColorStops: [0, 'red', 0.5, 'yellow', 1, 'blue'],\n    stroke: 'black',\n    strokeWidth: 4,\n    draggable: true,\n  });\n\n  /*\n    * \u7ed1\u5b9a\u76d1\u542c\u5668\n    */\n  colorPentagon.on('mouseover touchstart', function () {\n    this.fill('blue');\n  });\n\n  colorPentagon.on('mouseout touchend', function () {\n    this.fill('red');\n  });\n\n  patternPentagon.on('mouseover touchstart', function () {\n    this.fillPatternImage(images.yoda);\n    this.fillPatternOffset({ x: -100, y: 70 });\n  });\n\n  patternPentagon.on('mouseout touchend', function () {\n    this.fillPatternImage(images.darthVader);\n    this.fillPatternOffset({ x: -220, y: 70 });\n  });\n\n  linearGradPentagon.on('mouseover touchstart', function () {\n    this.fillLinearGradientStartPoint({ x: -50 });\n    this.fillLinearGradientEndPoint({ x: 50 });\n    this.fillLinearGradientColorStops([0, 'green', 1, 'yellow']);\n  });\n\n  linearGradPentagon.on('mouseout touchend', function () {\n    // \u4f7f\u7528 setAttrs \u540c\u65f6\u8bbe\u7f6e\u591a\u4e2a\u5c5e\u6027\n    this.setAttrs({\n      fillLinearGradientStartPoint: { x: -50, y: -50 },\n      fillLinearGradientEndPoint: { x: 50, y: 50 },\n      fillLinearGradientColorStops: [0, 'red', 1, 'yellow'],\n    });\n  });\n\n  radialGradPentagon.on('mouseover touchstart', function () {\n    this.fillRadialGradientColorStops([\n      0,\n      'red',\n      0.5,\n      'yellow',\n      1,\n      'green',\n    ]);\n  });\n\n  radialGradPentagon.on('mouseout touchend', function () {\n    // \u4f7f\u7528 setAttrs \u540c\u65f6\u8bbe\u7f6e\u591a\u4e2a\u5c5e\u6027\n    this.setAttrs({\n      fillRadialGradientStartPoint: 0,\n      fillRadialGradientStartRadius: 0,\n      fillRadialGradientEndPoint: 0,\n      fillRadialGradientEndRadius: 70,\n      fillRadialGradientColorStops: [0, 'red', 0.5, 'yellow', 1, 'blue'],\n    });\n  });\n\n  layer.add(colorPentagon);\n  layer.add(patternPentagon);\n  layer.add(linearGradPentagon);\n  layer.add(radialGradPentagon);\n  stage.add(layer);\n}\nvar sources = {\n  darthVader: 'https://konvajs.org/assets/darth-vader.jpg',\n  yoda: 'https://konvajs.org/assets/yoda.jpg',\n};\n\nloadImages(sources, function (images) {\n  draw(images);\n});\n"})})}),(0,r.jsx)(i.A,{value:"React",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",metastring:"live react use-image",live:!0,children:"import React from 'react';\nimport { Stage, Layer, RegularPolygon } from 'react-konva';\nimport useImage from 'use-image';\n\nconst commonProps = {\n  sides: 5,\n  radius: 70,\n  stroke: 'black',\n  strokeWidth: 4,\n  draggable: true,\n};\n\nconst ColorPolygon = () => {\n  const [fill, setFill] = React.useState('red');\n  return (\n    <RegularPolygon\n      {...commonProps}\n      x={80}\n      y={window.innerHeight / 2}\n      fill={fill}\n      onMouseEnter={(e) => {\n        setFill('blue');\n        e.target.getStage().container().style.cursor = 'pointer';\n      }}\n      onMouseLeave={(e) => {\n        setFill('red');\n        e.target.getStage().container().style.cursor = 'default';\n      }}\n    />\n  );\n};\n\nconst PatternPolygon = () => {\n  const [darthVader] = useImage('https://konvajs.org/assets/darth-vader.jpg');\n  const [yoda] = useImage('https://konvajs.org/assets/yoda.jpg');\n  const [image, setImage] = React.useState(null);\n  const [offset, setOffset] = React.useState({ x: -220, y: 70 });\n\n  React.useEffect(() => {\n    if (darthVader) {\n      setImage(darthVader);\n    }\n  }, [darthVader]);\n\n  return (\n    <RegularPolygon\n      {...commonProps}\n      x={220}\n      y={window.innerHeight / 2}\n      fillPatternImage={image}\n      fillPatternOffset={offset}\n      onMouseEnter={(e) => {\n        setImage(yoda);\n        setOffset({ x: -100, y: 70 });\n        e.target.getStage().container().style.cursor = 'pointer';\n      }}\n      onMouseLeave={(e) => {\n        setImage(darthVader);\n        setOffset({ x: -220, y: 70 });\n        e.target.getStage().container().style.cursor = 'default';\n      }}\n    />\n  );\n};\n\nconst LinearGradientPolygon = () => {\n  const [colorStops, setColorStops] = React.useState([0, 'red', 1, 'yellow']);\n  return (\n    <RegularPolygon\n      {...commonProps}\n      x={360}\n      y={window.innerHeight / 2}\n      fillLinearGradientStartPoint={{ x: -50, y: -50 }}\n      fillLinearGradientEndPoint={{ x: 50, y: 50 }}\n      fillLinearGradientColorStops={colorStops}\n      onMouseEnter={(e) => {\n        setColorStops([0, 'green', 1, 'yellow']);\n        e.target.getStage().container().style.cursor = 'pointer';\n      }}\n      onMouseLeave={(e) => {\n        setColorStops([0, 'red', 1, 'yellow']);\n        e.target.getStage().container().style.cursor = 'default';\n      }}\n    />\n  );\n};\n\nconst RadialGradientPolygon = () => {\n  const [colorStops, setColorStops] = React.useState([0, 'red', 0.5, 'yellow', 1, 'blue']);\n  return (\n    <RegularPolygon\n      {...commonProps}\n      x={500}\n      y={window.innerHeight / 2}\n      fillRadialGradientStartPoint={{ x: 0, y: 0 }}\n      fillRadialGradientStartRadius={0}\n      fillRadialGradientEndPoint={{ x: 0, y: 0 }}\n      fillRadialGradientEndRadius={70}\n      fillRadialGradientColorStops={colorStops}\n      onMouseEnter={(e) => {\n        setColorStops([0, 'red', 0.5, 'yellow', 1, 'green']);\n        e.target.getStage().container().style.cursor = 'pointer';\n      }}\n      onMouseLeave={(e) => {\n        setColorStops([0, 'red', 0.5, 'yellow', 1, 'blue']);\n        e.target.getStage().container().style.cursor = 'default';\n      }}\n    />\n  );\n};\n\nconst App = () => {\n  return (\n    <Stage width={window.innerWidth} height={window.innerHeight}>\n      <Layer>\n        <ColorPolygon />\n        <PatternPolygon />\n        <LinearGradientPolygon />\n        <RadialGradientPolygon />\n      </Layer>\n    </Stage>\n  );\n};\n\nexport default App;\n"})})}),(0,r.jsx)(i.A,{value:"Vue",children:(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-html",metastring:"live vue",live:!0,children:"<template>\n  <v-stage :config=\"stageSize\">\n    <v-layer>\n      <v-regular-polygon\n        :config=\"{\n          x: 80,\n          y: stageSize.height / 2,\n          sides: 5,\n          radius: 70,\n          fill: colorFill,\n          stroke: 'black',\n          strokeWidth: 4,\n          draggable: true,\n        }\"\n        @mouseenter=\"onColorEnter\"\n        @mouseleave=\"onColorLeave\"\n      />\n      <v-regular-polygon\n        :config=\"{\n          x: 220,\n          y: stageSize.height / 2,\n          sides: 5,\n          radius: 70,\n          fillPatternImage: patternImage,\n          fillPatternOffset: patternOffset,\n          stroke: 'black',\n          strokeWidth: 4,\n          draggable: true,\n        }\"\n        @mouseenter=\"onPatternEnter\"\n        @mouseleave=\"onPatternLeave\"\n      />\n      <v-regular-polygon\n        :config=\"{\n          x: 360,\n          y: stageSize.height / 2,\n          sides: 5,\n          radius: 70,\n          fillLinearGradientStartPoint: { x: -50, y: -50 },\n          fillLinearGradientEndPoint: { x: 50, y: 50 },\n          fillLinearGradientColorStops: linearGradientStops,\n          stroke: 'black',\n          strokeWidth: 4,\n          draggable: true,\n        }\"\n        @mouseenter=\"onLinearGradientEnter\"\n        @mouseleave=\"onLinearGradientLeave\"\n      />\n      <v-regular-polygon\n        :config=\"{\n          x: 500,\n          y: stageSize.height / 2,\n          sides: 5,\n          radius: 70,\n          fillRadialGradientStartPoint: { x: 0, y: 0 },\n          fillRadialGradientStartRadius: 0,\n          fillRadialGradientEndPoint: { x: 0, y: 0 },\n          fillRadialGradientEndRadius: 70,\n          fillRadialGradientColorStops: radialGradientStops,\n          stroke: 'black',\n          strokeWidth: 4,\n          draggable: true,\n        }\"\n        @mouseenter=\"onRadialGradientEnter\"\n        @mouseleave=\"onRadialGradientLeave\"\n      />\n    </v-layer>\n  </v-stage>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      stageSize: {\n        width: window.innerWidth,\n        height: window.innerHeight,\n      },\n      colorFill: 'red',\n      patternImage: null,\n      patternOffset: { x: -220, y: 70 },\n      linearGradientStops: [0, 'red', 1, 'yellow'],\n      radialGradientStops: [0, 'red', 0.5, 'yellow', 1, 'blue'],\n      images: {},\n    };\n  },\n  mounted() {\n    this.loadImages();\n  },\n  methods: {\n    loadImages() {\n      const sources = {\n        darthVader: 'https://konvajs.org/assets/darth-vader.jpg',\n        yoda: 'https://konvajs.org/assets/yoda.jpg',\n      };\n\n      Object.keys(sources).forEach((name) => {\n        const image = new Image();\n        image.onload = () => {\n          this.images[name] = image;\n          if (name === 'darthVader') {\n            this.patternImage = image;\n          }\n        };\n        image.src = sources[name];\n      });\n    },\n    onColorEnter(e) {\n      this.colorFill = 'blue';\n      e.target.getStage().container().style.cursor = 'pointer';\n    },\n    onColorLeave(e) {\n      this.colorFill = 'red';\n      e.target.getStage().container().style.cursor = 'default';\n    },\n    onPatternEnter(e) {\n      this.patternImage = this.images.yoda;\n      this.patternOffset = { x: -100, y: 70 };\n      e.target.getStage().container().style.cursor = 'pointer';\n    },\n    onPatternLeave(e) {\n      this.patternImage = this.images.darthVader;\n      this.patternOffset = { x: -220, y: 70 };\n      e.target.getStage().container().style.cursor = 'default';\n    },\n    onLinearGradientEnter(e) {\n      this.linearGradientStops = [0, 'green', 1, 'yellow'];\n      e.target.getStage().container().style.cursor = 'pointer';\n    },\n    onLinearGradientLeave(e) {\n      this.linearGradientStops = [0, 'red', 1, 'yellow'];\n      e.target.getStage().container().style.cursor = 'default';\n    },\n    onRadialGradientEnter(e) {\n      this.radialGradientStops = [0, 'red', 0.5, 'yellow', 1, 'green'];\n      e.target.getStage().container().style.cursor = 'pointer';\n    },\n    onRadialGradientLeave(e) {\n      this.radialGradientStops = [0, 'red', 0.5, 'yellow', 1, 'blue'];\n      e.target.getStage().container().style.cursor = 'default';\n    },\n  },\n};\n<\/script>\n"})})})]})]})}function f(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(g,{...n})}):g(n)}},19365:(n,e,t)=>{t.d(e,{A:()=>l});t(96540);var a=t(34164);const r={tabItem:"tabItem_Ymn6"};var o=t(74848);function l({children:n,hidden:e,className:t}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,t),hidden:e,children:n})}},11470:(n,e,t)=>{t.d(e,{A:()=>w});var a=t(96540),r=t(34164),o=t(17559),l=t(23104),i=t(56347),s=t(205),d=t(57485),u=t(31682),c=t(70679);function g(n){return a.Children.toArray(n).filter((n=>"\n"!==n)).map((n=>{if(!n||(0,a.isValidElement)(n)&&function(n){const{props:e}=n;return!!e&&"object"==typeof e&&"value"in e}(n))return n;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof n.type?n.type:n.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function f(n){const{values:e,children:t}=n;return(0,a.useMemo)((()=>{const n=e??function(n){return g(n).map((({props:{value:n,label:e,attributes:t,default:a}})=>({value:n,label:e,attributes:t,default:a})))}(t);return function(n){const e=(0,u.XI)(n,((n,e)=>n.value===e.value));if(e.length>0)throw new Error(`Docusaurus error: Duplicate values "${e.map((n=>n.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(n),n}),[e,t])}function h({value:n,tabValues:e}){return e.some((e=>e.value===n))}function m({queryString:n=!1,groupId:e}){const t=(0,i.W6)(),r=function({queryString:n=!1,groupId:e}){if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!e)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return e??null}({queryString:n,groupId:e});return[(0,d.aZ)(r),(0,a.useCallback)((n=>{if(!r)return;const e=new URLSearchParams(t.location.search);e.set(r,n),t.replace({...t.location,search:e.toString()})}),[r,t])]}function p(n){const{defaultValue:e,queryString:t=!1,groupId:r}=n,o=f(n),[l,i]=(0,a.useState)((()=>function({defaultValue:n,tabValues:e}){if(0===e.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:e}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${e.map((n=>n.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=e.find((n=>n.default))??e[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:e,tabValues:o}))),[d,u]=m({queryString:t,groupId:r}),[g,p]=function({groupId:n}){const e=function(n){return n?`docusaurus.tab.${n}`:null}(n),[t,r]=(0,c.Dv)(e);return[t,(0,a.useCallback)((n=>{e&&r.set(n)}),[e,r])]}({groupId:r}),y=(()=>{const n=d??g;return h({value:n,tabValues:o})?n:null})();(0,s.A)((()=>{y&&i(y)}),[y]);return{selectedValue:l,selectValue:(0,a.useCallback)((n=>{if(!h({value:n,tabValues:o}))throw new Error(`Can't select invalid tab value=${n}`);i(n),u(n),p(n)}),[u,p,o]),tabValues:o}}var y=t(92303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function S({className:n,block:e,selectedValue:t,selectValue:a,tabValues:o}){const i=[],{blockElementScrollPositionUntilNextRender:s}=(0,l.a_)(),d=n=>{const e=n.currentTarget,r=i.indexOf(e),l=o[r].value;l!==t&&(s(e),a(l))},u=n=>{let e=null;switch(n.key){case"Enter":d(n);break;case"ArrowRight":{const t=i.indexOf(n.currentTarget)+1;e=i[t]??i[0];break}case"ArrowLeft":{const t=i.indexOf(n.currentTarget)-1;e=i[t]??i[i.length-1];break}}e?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":e},n),children:o.map((({value:n,label:e,attributes:a})=>(0,b.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:n=>{i.push(n)},onKeyDown:u,onClick:d,...a,className:(0,r.A)("tabs__item",v.tabItem,a?.className,{"tabs__item--active":t===n}),children:e??n},n)))})}function x({lazy:n,children:e,selectedValue:t}){const o=(Array.isArray(e)?e:[e]).filter(Boolean);if(n){const n=o.find((n=>n.props.value===t));return n?(0,a.cloneElement)(n,{className:(0,r.A)("margin-top--md",n.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:o.map(((n,e)=>(0,a.cloneElement)(n,{key:e,hidden:n.props.value!==t})))})}function P(n){const e=p(n);return(0,b.jsxs)("div",{className:(0,r.A)(o.G.tabs.container,"tabs-container",v.tabList),children:[(0,b.jsx)(S,{...e,...n}),(0,b.jsx)(x,{...e,...n})]})}function w(n){const e=(0,y.A)();return(0,b.jsx)(P,{...n,children:g(n.children)},String(e))}},28453:(n,e,t)=>{t.d(e,{R:()=>l,x:()=>i});var a=t(96540);const r={},o=a.createContext(r);function l(n){const e=a.useContext(o);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),a.createElement(o.Provider,{value:e},n.children)}}}]);